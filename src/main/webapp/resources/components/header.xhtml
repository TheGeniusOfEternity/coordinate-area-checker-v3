<ui:component
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite"
  xmlns:p="http://primefaces.org/ui"
  xmlns:h="jakarta.faces.html"
>
  <cc:interface>
    <cc:attribute name="studentCredits" required="true" />
    <cc:attribute name="groupName" required="true" />
    <cc:attribute name="taskId" required="true" />
  </cc:interface>
  <cc:implementation>
    <header class="appear">
      <nav>
        <ul>
          <li>#{cc.attrs.studentCredits}</li>
          <li>Группа #{cc.attrs.groupName}</li>
          <li>Вариант №#{cc.attrs.taskId}</li>
          <li>
            <h:form>
              <p:commandButton
                styleClass="ui-button-flat redirect-btn"
                icon="pi pi-arrow-right"
                iconPos="right"
                value="Перейти на основную страницу"
                action="#{startPageBean.goToMainPage}"
                onclick="cleanupBeforeNavigation(this)"
              />
            </h:form>
          </li>
        </ul>
      </nav>
    </header>
    <style>
        header {
            opacity: 0;
            position: absolute;
            top: 0;
        }
        header.appear {
            animation: fadeIn 0.8s ease 0.5s forwards;
        }
        header.disappear {
            animation: fadeOut 0.8s ease forwards;
        }
        header, nav, ul {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;

            ul {
                justify-content: space-between;
                list-style: none;
                padding: 1rem 2rem;
                margin: 0;
                gap: 2rem;

                li {
                    user-select: none;
                    color: var(--accent-color);
                }

                li:last-child {
                    margin-left: auto;
                    margin-right: -1rem;
                    text-align: center;
                }
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                margin-top: -1rem;
            }
            to  {
                opacity: 1;
                margin-top: 0;
            }
        }

        @keyframes fadeOut {
            from  {
                opacity: 1;
                margin-top: 0;
            }
            to {
                opacity: 0;
                margin-top: -1rem;
            }
        }
    </style>
    <script>
        function cleanupBeforeNavigation() {
            for (let i = 1; i &lt; 10000; i++) {
                clearInterval(i);
                clearTimeout(i);
            }
            const header = document.querySelector(".appear")
            header.classList.remove("appear")
            header.classList.add("disappear")
        }
    </script>
  </cc:implementation>
</ui:component>