<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.org/ui"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
>
  <h:head>
    <h:outputStylesheet library="css" name="common.css" />
    <h:outputStylesheet library="css" name="main.css" />
    <meta charset="UTF-8"/>
    <title>JSF - Главная страница</title>
  </h:head>
  <h:body styleClass="zoomed-in">
    <h:form styleClass="form section">
      <div class="input-block">
        <p:outputLabel for="x-text" styleClass="label" value="X: " />
        <div class="options">
          <h:inputHidden id="x-text" value="#{mainPageBean.x}" />
          <ui:repeat
            var="xValue"
            value="#{mainPageBean.optionsX}"
          >
            <p:commandLink
              styleClass="#{
                mainPageBean.x == xValue
                  ? 'x-option selected'
                  : 'x-option'
              }"
              update="@form"
              value="#{xValue}"
              disabled="#{mainPageBean.x == xValue ? true : false}"
              action="#{mainPageBean.setX(xValue)}"
            />
          </ui:repeat>
        </div>
      </div>

      <!-- Ввод Y -->
      <h:outputLabel value="Y: " for="yInput"/>
      <h:inputText id="yInput" value="#{mainPageBean.y}" />
      <br/>

      <!-- Ввод R -->
      <h:outputLabel value="R: " for="rInput"/>
      <h:selectOneMenu id="rInput" value="#{mainPageBean.r}">
        <f:selectItem itemLabel="1" itemValue="1" />
        <f:selectItem itemLabel="2" itemValue="2" />
        <f:selectItem itemLabel="3" itemValue="3" />
        <f:selectItem itemLabel="4" itemValue="4" />
        <f:selectItem itemLabel="5" itemValue="5" />
      </h:selectOneMenu>
      <br/>

      <div class="buttons">
        <h:commandButton
          value="Отправить"
          action="#{mainPageBean.submitForm}"
        />
        <p:commandButton
          styleClass="ui-button-flat redirect-btn"
          icon="pi pi-arrow-left"
          value="Вернуться на стартовую страницу"
          action="#{mainPageBean.goToStartPage}"
          onclick="cleanupBeforeNavigation()"
        />
      </div>
    </h:form>
    <script>
        function cleanupBeforeNavigation() {
            for (let i = 1; i &lt; 10000; i++) {
                clearInterval(i);
                clearTimeout(i);
            }

            const oldBody = document.body;
            const newBody = oldBody.cloneNode(true);
            oldBody.parentNode.replaceChild(newBody, oldBody);
        }
    </script>
    <h:outputScript target="body">
      document.body.classList.remove("zoomed-out")
      document.body.classList.add("zoomed-in")
    </h:outputScript>
  </h:body>
</html>